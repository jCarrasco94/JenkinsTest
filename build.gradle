buildscript {
repositories {
maven {
url "https://plugins.gradle.org/m2/"
}
}
dependencies {}
}

plugins {
id 'com.ullink.msbuild' version '2.16'
id 'com.ullink.nuget' version '2.12'
}

apply plugin:'msbuild'
apply plugin:'nuget'

nugetRestore{
packagesConfigFile "$project.rootDir/$project.solutionFolder/$project.solutionName"
packagesDirectory "$project.rootDir/$project.solutionFolder/packages"
}

msbuild {
  solutionFile = 'JenkinsTest.sln'
  projectFile = file('src/JenkinsTest.csproj')
  projectName = JenkinsTest
  verbosity = 'detailed'

  targets = ['Clean', 'Rebuild']
  version = '15.0'
  msbuildDir = 'C:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\BuildTools\\MSBuild\\15.0\\bin'
  destinationDir = 'build/msbuild/bin'
  intermediateDir = 'build/msbuild/obj'
  generateDoc = false
  parameters.SomeProperty = 'Value'
}
msbuild.dependsOn nugetRestore